<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title></title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
   

    <script src="js/load.js"></script>
    <script type="text/javascript">
        // loadJsCssFileRelToLoadJs("bootstrap-3.3.0-dist/dist/css/bootstrap.css", "css");
        // loadJsCssFileRelToLoadJs("lightbox/lightbox.css", "css");
        // loadJsCssFileRelToLoadJs("bootstrap-3.3.0-dist/dist/js/bootstrap.min.js", "js");
        // loadJsCssFileRelToLoadJs("lightbox/lightbox-2.6.min.js", "js");
        // loadJsCssFileRelToLoadJs("masonry/dist/masonry.pkgd.min.js", "js");
        // loadJsCssFileRelToLoadJs("imagesloaded.js", "js");
        // loadJsCssFileRelToLoadJs("fusioncharts/fusioncharts.js", "js");
        // loadJsCssFileRelToLoadJs("fusioncharts/fusioncharts.theme.fint.js", "js");
        // loadJsCssFileRelToLoadJs("weather_trend.js", "js");
        loadJsCssFileRelToLoadJs("jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css", "css");
        loadJsCssFileRelToLoadJs("jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js", "js");
        loadJsCssFileRelToLoadJs("masonry/dist/masonry.pkgd.min.js", "js");
        loadJsCssFileRelToLoadJs("imagesloaded.js", "js");
        loadJsCssFileRelToLoadJs("../js/easydialog/easydialog.min.js", "js");
        loadJsCssFileRelToLoadJs("../js/cordova.js", "js");
        //loadJsCssFileRelToLoadJs("js/swiper/swiper.min.js");
        $(function () {

        })
    </script>
    
</head>
<body>
    <div data-role="page" id="main">
        <script type="text/javascript">
            loadJsCssFileRelToLoadJs("../css/footStyle.css", "css");
            loadJsCssFileRelToLoadJs("../css/headerStyle.css", "css");
            loadJsCssFileRelToLoadJs("../css/mainStyle.css", "css");
            loadJsCssFileRelToLoadJs("../css/secondaryMenuStyle.css", "css");
            loadJsCssFileRelToLoadJs("../css/swiper/swiper.min.css", "css");
            //loadJsCssFileRelToLoadJs("../js/masonry/dist/masonry.pkgd.min.js", "js");
            //loadJsCssFileRelToLoadJs("../js/imagesloaded.js", "js");


            //loadJsCssFileRelToLoadJs("../js/fusioncharts/fusioncharts.js", "js");
            //loadJsCssFileRelToLoadJs("../js/fusioncharts/fusioncharts.theme.fint.js", "js");

        </script>
        <style>
            * {
                color: white;
                font-family: 微软雅黑;
                /*font-weight:normal;*/
                text-shadow: none;
                font-size: 12px;
            }

            body {
                position: absolute;
                height: 100%;
                width: 100%;
                /*overflow: hidden;*/
            }

            #main {
                height: 100%;
            }

            .swiper-container {
                width: 100%;
                height: 100%;
            }

            
            .swiper-container-con1 .swiper-slide {
				font-size: 18px;
                color: black;
                width: 100% !important;
            }
            .swiper-container-con2 .swiper-slide {
                height: auto;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
            }
        </style>


        <div class="swiper-container swiper-container-all" style="background-image: url(img/c-1.jpg); background-size: 100% auto;">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="background-color:transparent;">
                    <div class="swiper-container swiper-container-con1">
                        <div class="swiper-wrapper">
                            <!--<div class="photo-wall-item">
                                <div class="photo-box">
                                    <img src="img/pubuliu/1.jpg" onloadeddata="aaa" />
                                </div>
                            </div>-->
                        </div>
                        <div class="swiper-scrollbar swiper-scrollbar1"></div>
                    </div>

                </div>
                <div class="swiper-slide" style="background-color:transparent;">
                    <div class="swiper-container swiper-container-con2">
                        <div class="swiper-wrapper">
                            <div id="hhh" class="swiper-slide" style="padding:3px;text-align:center;">
                                <div class="box1 ui-grid-a">
                                    <div class="ui-block-a">
                                        <span id="currentDate" class="current-time">2015-04-09 星期四 乙未年 二月廿一 庚辰月 乙卯日</span>
                                    </div>
                                    <div class="ui-block-b">
                                        <input id="cameraBtn" class="box1-camera-btn" type="image" src="img/camera.png" />    
                                    </div>
                                </div>
                                <div class="box2">
                                    <h1 id="main_box2_position">清新磐安 身心两安</h1>
                                    <div class="ui-grid-b">
                                        <div class="ui-block-a">
                               
                                            <img id="main_box2_icon1" src="img/weather/NA.png" />
                                        </div>
                                        <div class="ui-block-b">
                                
                                            <img id="main_box2_icon2" src="img/weather/NA.png" />
                                        </div>
                                        <div class="ui-block-c">                                       
                                            <p><span id="main_box2_weather">-----</span><br /><span id="main_box2_temp">---℃</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="box3">
                                    <h3>当前实况</h3>
                                    <div class="title-divider"></div>
                                    <div class="ui-grid-a box3_con">
                                        <div class="ui-block-a block1">
                                            <img id="main_box3_icon1" src="img\main_box3_icon1.png"/>
                                        </div>
                                        <div class="ui-block-b block2">
                                            <p id="main_box3_weather">晴</p>
                                            <div class="main-box3-divider"></div>
                                            <div class="ui-grid-b  box3-current-detail">
                                                <div class="ui-block-a">
                                                    <p id="main_box3_wind1">----</p>
                                                    <p id="main_box3_temp1">相对湿度</p>
                                                    <p>负氧离子</p>
                                                    <p>PM2.5</p>
                                                </div>
                                                <div class="ui-block-b">
                                                    <p id="main_box3_wind2">----</p>                                                    
                                                    <p id="main_box3_temp2">--%</p>
                                                    <p id="main_box3_ion">20000</p>
                                                    <p id="main_box3_pm25">----</p>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img id="main_box3_icon2" src="img\main_box3_icon2.png" style="margin-top:30px;"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>                           
                                <div class="box6">
                                    <h3>未来三天天气预报</h3>
                                    <div class="title-divider"></div>
                                    
                                    <div class="box6_con">
                                    
                                        
                                        <table class="box6-table" style="width:80%;text-align:center;margin:0 auto;">                                           
                                           <!--<tr>                                                                                      
                                                <td style="text-align:left;">
                                                    周二<br />
                                                    15/5<br />
                                                    上午<br />
                                                    <img src="img/main_box2_icon1.png" />
                                                </td>
                                                <td>
                                                    周二<br />
                                                    15/5<br />
                                                    下午<br />
                                                    <img src="img/main_box2_icon1.png" />
                                                </td>
                                                <td style="text-align:right;">
                                                    周三<br />
                                                    16/5<br />
                                                    上午<br />
                                                    <img src="img/main_box2_icon1.png" />
                                                </td>                                         
                                            </tr>
                                            <tr>                                    
                                                <td colspan="3">
                                                    <div id="chartContainer"></div>
                                                </td>                                            
                                            </tr>
                                            <tr>                                                
                                                <td style="text-align:left;">
                                                    东风<br />
                                                    1-2级<br />
                                                </td>
                                                <td>                                                
                                                    南风<br />
                                                    3级<br />
                                                </td>
                                                <td style="text-align:right;">
                                                    西风<br />
                                                    微风<br />
                                                </td> 
                                            </tr>-->

                                        </table>
                                    </div>
                                </div>
                                <div class="box7">
                                    <h3>旅游指数</h3>
                                    <div class="title-divider"></div>
                                    <div class="box7_con">
                                        <div class="ui-grid-a">
                                            <div class="ui-block-a">
                                                <img src="img/icon5_05.png" />
                                                <p>舒适度指数<br /><span>较舒适</span></p>
                                            </div>
                                            <div class="ui-block-b">
                                                <img src="img/icon5_07.png" />
                                                <p>空气清新指数<br /><span>中等</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="box4">
                                    <h3>负氧离子</h3>
                                    <div class="title-divider"></div>
                                    <div class="box4_con">
                                        <div class="box4_grade">
                                            <h4>负氧离子含量与空气质量关系图 单位：个/cm3</h4>
                                            <div class="ui-grid-c">
                                                <div class="ui-block-a">
                                                    <span class="box4_grade1_text">非常清新</span>
                                                </div>
                                                <div class="ui-block-b">
                                                    <div class="box4_grade1_bar">
                                                        <span>>2000</span>
                                                    </div>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img src="img/grade1.png" />
                                                </div>
                                                <div class="ui-block-d">
                                                    <span>1000</span>
                                                </div>
                                            </div>
                                            <div class="ui-grid-c">
                                                <div class="ui-block-a">
                                                    <span class="box4_grade2_text">清新</span>
                                                </div>
                                                <div class="ui-block-b">
                                                    <div class="box4_grade2_bar">
                                                        <span>1500-2000</span>
                                                    </div>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img src="img/grade2.png" />
                                                </div>
                                                <div class="ui-block-d">
                                                    <span>1000</span>
                                                </div>
                                            </div>
                                            <div class="ui-grid-c">
                                                <div class="ui-block-a">
                                                    <span class="box4_grade3_text">较清新</span>
                                                </div>
                                                <div class="ui-block-b">
                                                    <div class="box4_grade3_bar">
                                                        <span>1000-1500</span>
                                                    </div>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img src="img/grade3.png" />
                                                </div>
                                                <div class="ui-block-d">
                                                    <span>1000</span>
                                                </div>
                                            </div>
                                            <div class="ui-grid-c">
                                                <div class="ui-block-a">
                                                    <span class="box4_grade4_text">一般</span>
                                                </div>
                                                <div class="ui-block-b">
                                                    <div class="box4_grade4_bar">
                                                        <span>500-1000</span>
                                                    </div>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img src="img/grade4.png" />
                                                </div>
                                                <div class="ui-block-d">
                                                    <span>1000</span>
                                                </div>
                                            </div>
                                            <div class="ui-grid-c">
                                                <div class="ui-block-a">
                                                    <span class="box4_grade5_text">不清新</span>
                                                </div>
                                                <div class="ui-block-b">
                                                    <div class="box4_grade5_bar">
                                                        <span>300-500</span>
                                                    </div>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img src="img/grade5.png" />
                                                </div>
                                                <div class="ui-block-d">
                                                    <span>1000</span>
                                                </div>
                                            </div>
                                            <div class="ui-grid-c">
                                                <div class="ui-block-a">
                                                    <span class="box4_grade6_text">非常不清新</span>
                                                </div>
                                                <div class="ui-block-b">
                                                    <div class="box4_grade6_bar">
                                                        <span><300</span>
                                                    </div>
                                                </div>
                                                <div class="ui-block-c">
                                                    <img src="img/grade6.png" />
                                                </div>
                                                <div class="ui-block-d">
                                                    <span>1000</span>
                                                </div>
                                            </div>
                                        </div>
                                        <h5>负氧离子：</h5>
                                        <p>负氧离子被誉为“空气维生素”。负氧离子有利于人体的身心健康。</p>
                                        <h5>负氧离子的功效：</h5>
                                        <p>
                                            1. 消烟、除尘：负离子能迅速中和空气中属于正离子的焦烟、“二手烟”、油烟及飘尘；<br />
                                            2. 改善空气结构：人每天需要130亿个负离子，而我们居室、办公室、娱乐场所等环境仅册提供约2-20亿个负离子，往上爬往容易导致肺炎、气管炎等呼吸道疾病；<br />
                                            3. 改善肺功能：吸入负离子30分钟后，肺能增加氧气吸收量20%，而多排出14.5二氧化碳；<br />
                                            4. 改善心肌功能：有明显降压作用，可使人精神振奋。提高工作效率。
                                        </p>
                                    </div>
                                </div>
                                <div class="box5">
                                    <h3>PM2.5</h3>
                                    <div class="box5_con" >
                                        <div class="title-divider"></div>
                                        <div class="ui-grid-b">
                                            <div class="ui-block-a" style="height:100px;">

                                                <div id="chartContainer2"></div>
                                            </div>
                                            <div class="ui-block-c">

                                                <p id="main_box5_quality1">0</p>
                                                <p id="main_box5_quality2">良</p>
                                            </div>
                                        </div>
                                        <p id="main_box5_tip">
                                            温馨提示：空气质量可接受，但某些污染物可能对极少数异常敏感人群健康有较弱影响。
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-scrollbar swiper-scrollbar2"></div>
                    </div>               
                </div>
            </div>
        </div>
        <div data-role="footer" data-position="fixed" id="footerMenu" data-fullscreen="true">
            <div data-role="navbar">
                <ul>
                    <li>
                        
                        <a id="skjcBtn"><img src="img/main_btn01.png" /><br /><span>实况监测</span></a>
                    </li>
                    <li>
                        
                        <a id="tqybBtn"><img src="img/main_btn02.png" /><br /><span>天气预报</span></a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="dialogCon" style="display:none">       
            <ul class="dialog-ul">
                <li>
                    <input type="button" value="拍照" id="photoBtn1" style="background-color:gray;" />
					<input id="image_src" type="file"  name="upfile" contentEditable="false" accept="image/*" style="width:448px; height: 22px;display:none;" onchange="ajaxFileUpload()"/></input>
                    <input type="button" value="从照片中选择" onclick="image_src.click()" id="photoBtn2"  />
                </li>
            </ul>
        </div>
        <script>
            $(function () {
				var localhost_weather= store.get('localhost_weather');
				localhost_weather.user_info.auto_login=false;
				store.set("localhost_weather",localhost_weather);
                $("#skjcBtn").click(function () {
                    location="secondarymenu.html";
                });
                $("#tqybBtn").click(function () {
                    location="tianqiyubao.html";
                });
            });
           
        </script>
        
        <script>
		function showCurrentIns(value) {
			if(value>2000)
				value=1909;
            var flag;
            var array = $(".ui-block-d");
            if (value > 2000) {
                flag = 0;
            }
            else if (value > 1500 && value <= 2000) {
                flag = 1;
            }
            else if (value > 1000 && value <= 1500) {
                flag = 2;
            }
            else if (value > 500 && value <= 1000) {
                flag = 3;
            }
            else if (value > 300 && value <= 500) {
                flag = 4;
            }
            else {
                flag = 5;
            }
            for (var i = 0; i < array.length; i++) {
                if (flag == i) {
                    array[flag].style.display = "block";
                    array[flag].innerHTML = "<span>" + value + "</span>";

                }
                else
                    array[i].style.display = "none";
            }
        }

			$(function(){
				var localhost_weather= store.get('localhost_weather');
				
				if(!localhost_weather.weather_desc_type)
				{
					$.ajax({
						 type:"GET",
						 url:globle_url+"/get_weather_desc_type",
						 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
						 success:function(data){
							localhost_weather.weather_desc_type=data;
							store.set("localhost_weather",localhost_weather);
						 }
					});
				}
				if(!localhost_weather.wind_s_type)
				{
					$.ajax({
						 type:"GET",
						 url:globle_url+"/get_wind_s_type",
						 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
						 success:function(data){
							localhost_weather.wind_s_type=data;
							store.set("localhost_weather",localhost_weather);
						 }
					});
				}
				if(!localhost_weather.wind_d_type)
				{
					$.ajax({
						 type:"GET",
						 url:globle_url+"/get_wind_d_type",
						 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
						 success:function(data){
							localhost_weather.wind_d_type=data;
							store.set("localhost_weather",localhost_weather);
						 }
					});
				}
				$.ajax({
                 type:"GET",
                 url:globle_url+"/get_chinese_calendar",
                 data:{},
				 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
                 beforeSend:function(){
                 },
                 success:function(data){
						console.info(data);
						//2015-6-23 | 星期二 | [农历]乙未年五月初八 羊年 6日芒种 22日夏至
						$("#currentDate").html(data.simple_gregorian_date+" 农历" +data.chinese_year+" "+data.chinese_month+data.chinese_date+" "+data.chinese_zodiac+"年 "+data.chinese_sectional_term_day+"日"+data.chinese_sectional_term_name +" "+data.chinese_principle_term_day+"日"+data.chinese_principle_term_name);
                 },
                 complete: function(XMLHttpRequest, textStatus){
                 },
                 error: function(){
                 }         
              });
				$.ajax({
                 type:"GET",
                 url:globle_url+"/get_lastest_probe_aws_per_hour",
                 data:{longitude:120.4,latitude:29.0},
				 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
                 beforeSend:function(){
                 },
                 success:function(data){
					 if(data.status=="success")
					 {
						var localhost_weather_data= store.get('localhost_weather').data;
						var res=data.result.latest_distance;
						var res_area=data.result.latest_area;
						var t=res.t/10;
						var tmax=res.tmax/10;
						var tmin=res.tmin/10;
						var ff=res.ff/10;
						var rain=res.rain;
						if(rain>0)
						{
							//$("#main_box3_weather").html("雨");
						}
						else
						{
							//$("#main_box3_weather").html("晴");
						}
						var rh;
						if(res_area.rh)
						{
							rh=res_area.rh;
							$("#main_box3_temp2").html(rh+"%");
						}
							showCurrentIns(res_area.v);
						//$("#main_box2_temp").html(tmin+"-"+tmax+"℃");
						$("#main_box3_wind2").html(ff+"米/秒");
					 }
				
						console.info(data);
						
                 },
                 complete: function(XMLHttpRequest, textStatus){
                 },
                 error: function(){
                 }         
              });
			  	$.ajax({
                 type:"GET",
                 url:globle_url+"/get_fcst_fine_city_by_stationnum",
                 data:{longitude:120.4,latitude:29.0},
				 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
                 success:function(data){
					 if(data.status=="success")
					 {
						var localhost_weather_data= store.get('localhost_weather').data;
						var res=data.result[0];
						var temp24H=parseFloat(res.temp24H).toFixed(0);
						var temp24L=parseFloat(res.temp24L).toFixed(0);
						var temp48H=parseFloat(res.temp48H).toFixed(0);
						var temp48L=parseFloat(res.temp48L).toFixed(0);
						var temp72H=parseFloat(res.temp72H).toFixed(0);
						var temp72L=parseFloat(res.temp72L).toFixed(0);
						var weaDesc24=res.weaDesc24;
						var weaDesc48=res.weaDesc48;
						var weaDesc72=res.weaDesc72;
						var windD24=res.windD24;
						var windD48=res.windD48;
						var windD72=res.windD72;
						var windS24=res.windS24;
						var windS48=res.windS48;
						var windS72=res.windS72;
						var windS24_=localhost_weather.wind_s_type[windS24];
						var windS48_=localhost_weather.wind_s_type[windS48];
						var windS72_=localhost_weather.wind_s_type[windS72];
						
						var windD24_=localhost_weather.wind_d_type[windD24];
						var windD48_=localhost_weather.wind_d_type[windD48];
						var windD72_=localhost_weather.wind_d_type[windD72];
						var weaDesc24_=localhost_weather.weather_desc_type[weaDesc24];
						var weaDesc48_=localhost_weather.weather_desc_type[weaDesc48];
						var weaDesc72_=localhost_weather.weather_desc_type[weaDesc72];
						$("#main_box2_icon1").attr("src","img/weather/"+weaDesc24+".png");
						$("#main_box2_icon2").attr("src","img/weather/"+weaDesc48+".png");
						$("#main_box3_weather").html(weaDesc24_);
						if(weaDesc24_==weaDesc48_)
						{
							$("#main_box2_weather").html(weaDesc24_);
						}
						else
							$("#main_box2_weather").html(weaDesc24_+"转"+weaDesc48_);
						$("#main_box3_wind1").html(windD24_);
						
						$("#main_box2_temp").html(temp24L+"-"+temp24H+"℃");
						 var weatherJson = {
							"imgs": {
								"img1": "img/weather/"+weaDesc24+".png",
								"img2": "img/weather/"+weaDesc48+".png",
								"img3": "img/weather/"+weaDesc72+".png"
							},
							"values": {
								"date1": [temp24H, temp24L],
								"date2": [temp48H,temp48L],
								"date3":[temp72H,temp72L]
							},
							"windDir": [windD24_,windD48_,windD72_],
							"windPower": [windS24_, windS48_, windS72_]
						};
						initTable(weatherJson);
					}
				
						
                 }
              });
			  //pm25
			  $.ajax({
                 type:"GET",
                 url:globle_url+"/get_lastest_probe_envi_per_hour",
                 data:{longitude:120.4,latitude:29.0},
				 dataType:'json',//"xml", "html", "script", "json", "jsonp", "text".
                 beforeSend:function(){
                 },
                 success:function(data){
					 if(data.status=="success")
					 {
					     var res = data.result;
					     
					     var pm25 = parseFloat(res.pm25 * 10).toFixed(1);
						 if(pm25>200)
							pm25=200;
					     // console.info("xxxxxxxxxx:"+pm25);
					     setTimeout(function () {
						    csatGauge.setDataForId("dials_id", pm25);
					     },500);
					     $("#main_box5_quality1").html(pm25);
					     $("#main_box3_pm25").html(pm25);
						if(pm25<35)
							$("#main_box5_quality2").html("一级优");
						else if(pm25>=35&&pm25<75)
						{
							$("#main_box5_quality2").html("二级良");
						}
						else if(pm25>=75&&pm25<115)
							$("#main_box5_quality2").html("三级轻度污染");
						else if(pm25>=115&&pm25<150)
							$("#main_box5_quality2").html("四级中度污染");
						else if(pm25>=150&&pm25<250)
							$("#main_box5_quality2").html("五级重度污染");
						else if(pm25>=250)
							$("#main_box5_quality2").html("六级严重污染");
						console.info(data);
					 }
						
						
                 },
                 complete: function(XMLHttpRequest, textStatus){
                 },
                 error: function(){
                 }         
              });
			});
			 var csatGauge ;
			 var weatherJson = {
                    "imgs": {
                        "img1": "img/main_box2_icon1.png",
                        "img2": "img/main_box2_icon1.png",
                        "img3": "img/main_box2_icon1.png"
                    },
                    "values": {
                        "date1": [8, -9],
                        "date2": [12,-2],
                        "date3":[16,3]
                    },
                    "windDir": ["东风","西风","东南风"],
                    "windPower": ["1-2级", "3级", "微风"]
                };
                function getWeek(num) {
                    var weekday;
                    switch (num) {
                        case 0:
                            weekday = "周日";
                            break;
                        case 1:
                            weekday = "周一";
                            break;
                        case 2:
                            weekday = "周二";
                            break;
                        case 3:
                            weekday = "周三";
                            break;
                        case 4:
                            weekday = "周四";
                            break;
                        case 5:
                            weekday = "周五";
                            break;
                        case 6:
                            weekday = "周六";
                            break;
                    }
                    return weekday;
                }
                function getDateFormat(date) {
                    return date.getDate() + "/" + (date.getMonth() + 1);
                }
                function initTable(weatherJson) {
                    var Date0 = new Date();
                    var Date1 = new Date();
                    var Date2 = new Date();
                    var Date3 = new Date();
                    var _max = Math.max(weatherJson.values.date1[0], weatherJson.values.date2[0], weatherJson.values.date3[0]);
                    var _min = Math.min(weatherJson.values.date1[1], weatherJson.values.date2[1], weatherJson.values.date3[1]);
                    Date1.setDate(Date0.getDate() + 1);
                    Date2.setDate(Date0.getDate() + 2);
                    Date3.setDate(Date0.getDate() + 3);
                    var tableHtml = "";
                    tableHtml = "<tr><td style='text-align:left;'>" + getWeek(Date1.getDay()) + "</td><td>" + getWeek(Date2.getDay()) + "</td><td style='text-align:right;'>" + getWeek(Date3.getDay()) +
                "</td></tr><tr><td style='text-align:left;'>" + getDateFormat(Date1) + "</td><td>" + getDateFormat(Date2) + "</td><td style='text-align:right;'>" + getDateFormat(Date3) +
                "</td></tr><tr><td style='text-align:left;'><img src='" + weatherJson.imgs.img1 + "' /></td><td><img src='" + weatherJson.imgs.img2 + "' /></td><td style='text-align:right;'><img src='" + weatherJson.imgs.img3 +
                "' /></td></tr><tr><td colspan='3'><div id='chartContainer'></div></td></tr>" +
                "<tr><td style='text-align:left;'>" + weatherJson.windDir[0] + "</td><td>" + weatherJson.windDir[1] + "</td><td style='text-align:right;'>" + weatherJson.windDir[2] +
                "</td></tr><tr><td style='text-align:left;'>" + weatherJson.windPower[0] + "</td><td>" + weatherJson.windPower[1] + "</td><td style='text-align:right;'>" + weatherJson.windPower[2] + "</td></tr>";
                    $(".box6-table").html(tableHtml);

                    FusionCharts.ready(function () {
                        //var width = screen.availWidth;
                        var height = 120;
                        var lineChart = new FusionCharts({
                            events: {
                                //entityClick: function (event, args) {
                                //    console.log(args.label + 'clicked');
                                //    alert(1);
                                //},
                                loaded: function () {
                                    var text = document.getElementsByTagName("tspan");
                                    for (var i = 0; i < text.length; i++) {
                                        if (text[i].innerHTML == "FusionCharts XT Trial") {
                                            text[i].style.display = "none";
                                        }
                                    }

                                },
                                resized: function () {
                                    setTimeout(function () {
                                        var text = document.getElementsByTagName("tspan");
                                        for (var i = 0; i < text.length; i++) {
                                            if (text[i].innerHTML == "FusionCharts XT Trial") {
                                                text[i].style.display = "none";
                                            }
                                        }
                                    }, 1);
                                }
                            },
                            "type": "msline",
                            "renderAt": "chartContainer",
                            "width": "100%",
                            "height": height,
                            "dataFormat": "json",
                            "dataSource": {
                                "chart": {
                                    "bgAlpha": "0",
                                    "showValues": "1",
                                    "showBorder": "0",
                                    //"paletteColors": "#F6E639,#92D4F7",
                                    // "bgcolor": "#5c8aa0",
                                    "xAxisNamePadding": "50",
                                    "chartLeftMargin": "0",
                                    "chartRightMargin": "0",
                                    "chartTopMargin": "0",
                                    "chartBottomMargin": "0",
                                    //是否显示y轴刻度
                                    "showYAxisValues": "0",
                                    "showCanvasBorder": "0",
                                    "usePlotGradientColor": "0",
                                    //"legendBorderAlpha": "0",
                                    //"legendShadow": "0",
                                    "showAxisLines": "0",
                                    "showYAxisLines": "0",
                                    "showAlternateHGridColor": "0",
                                    "divlineThickness": "1",
                                    "divLineDashed": "0",
                                    "divLineDashLen": "0",
                                    "divLineGapLen": "0",
                                    "yAxisMaxValue": _max+8,
                                    "yAxisMinValue": _min-8,
                                    //"numVDivLines": "2",
                                    "divLineColor": "#5c8aa0",
                                    "divLineAlpha": "0",
                                    "vDivLineAlpha": "15",
                                    "vdivLineColor": "#ffffff",
                                    "showAlternateVGridColor": "0",

                                    //"adjustDiv": "1",
                                    //"showDivLineValues":"1",//是否显示纵坐标刻度
                                    //画布背景
                                    //"canvasBgColor":"#5c8aa0",
                                    // "canvasBgColor":"#000",
                                    "canvasBgAlpha": "0",
                                    "showLegend": "0",
                                    "baseFontColor": "#FFFFFF",
                                    "anchorRadius": "5",
                                    "showToolTip": "1",
                                    "numDivLines": "1",
                                    "toolTipColor": "#000000"

                                },
                                "categories": [
                                   {

                                       "category": [
                                          {
                                          },
                                          {
                                              "vline": "true",
                                              "lineposition": "0",
                                              "color": "#ffffff",
                                              "alpha": "15"
                                          },
                                          {
                                          },
                                          {
                                              "vline": "true",
                                              "lineposition": "0",
                                              "color": "#ffffff",
                                              "alpha": "15"
                                          },
                                          {
                                          },
                                          {
                                              "vline": "true",
                                              "lineposition": "0",
                                              "color": "#ffffff",
                                              "alpha": "15"
                                          }

                                       ]
                                   }
                                ],
                                "dataset": [
                                   {
                                       "color": "#fe7506",
                                       "valuePosition": "above",
                                       "anchorBgColor": "#fe7506",
                                       "baseFontColor": "#fe7506",

                                       "data": [
                                          {
                                              "value": weatherJson.values.date1[0],
                                          },
                                          {
                                              "value": weatherJson.values.date2[0],
                                          },
                                          {
                                              "value": weatherJson.values.date3[0]
                                          }
                                       ]
                                   },
                                   {
                                       "color": "#95d44c",
                                       "valuePosition": "below",
                                       "anchorBgColor": "#95d44c",
                                       "valueFontColor": "#95d44c",
                                       "data": [
                                          {
                                              "value": weatherJson.values.date1[1]
                                          },
                                          {
                                              "value": weatherJson.values.date2[1]
                                          },
                                          {
                                              "value": weatherJson.values.date3[1]
                                          }
                                       ]
                                   }
                                ]

                            }
                        });
                        lineChart.render();
                        lineChart.setTransparent(true);
                    });
                }

            $(function () {
                
               // initTable(weatherJson);
           
               
				
                FusionCharts.ready(function () {
                    csatGauge = new FusionCharts({
                        events: {
                            //entityClick: function (event, args) {
                            //    console.log(args.label + 'clicked');
                            //    alert(1);
                            //},
                            loaded: function () {
                                var text = document.getElementsByTagName("tspan");
                                for (var i = 0; i < text.length; i++) {
                                    if (text[i].innerHTML == "FusionCharts XT Trial") {
                                        text[i].style.display = "none";
                                    }
                                }

                            },
                            resized: function () {
                                setTimeout(function () {
                                    var text = document.getElementsByTagName("tspan");
                                    for (var i = 0; i < text.length; i++) {
                                        if (text[i].innerHTML == "FusionCharts XT Trial") {
                                            text[i].style.display = "none";
                                        }
                                    }
                                }, 1);
                            }
                        },
                        "type": "angulargauge",
                        "renderAt": "chartContainer2",
                        "width": "100%",
                        "height": "100",
                        "dataFormat": "json",
                        "dataSource": {
                            "chart": {
                                "bgAlpha": "0",
                                "lowerLimit": "0",
                                "upperLimit": "200",
                                "theme": "fint",
                                "showLegend": "0",
                                "majorTMColor": "#B1E253",
                                //"minortmnumber": "1",
                                "majortmnumber": "20",
                                "majorTMThickness": "1",
                                "showLimits": "1",
                                "showTickValues": "1",
                                "autoAlignTickValues": "1",
                                "autoscale":"0",
                                //"bgColor": "#B1E253"
                                //刻度值距离表盘的距离
                                //"tickValueDistance":"10",
                                //每隔多少步长显示刻度值
                                //"tickValueStep":"2",
                                //"lowerLimitDisplay":"min",
                                //"placeTicksInside":"1",
                            },
                            "colorRange": {
                                "color": [
                                   {
                                       "minValue": "0",                                     
                                       "maxValue": "35",
                                       "code": "#01E401",
                                       "borderColor": "#B1E253",
                                   },
                                   {
                                       
                                       "minValue": "35",
                                       "maxValue": "75",
                                       "code": "#FEFE00",
                                       "borderColor": "#B1E253",
                                   },
                                   {
                                       
                                       "minValue": "75",
                                       "borderColor": "#B1E253",                                      
                                       "maxValue": "115",
                                       "code": "#FF7F00"
                                   },
                                   {                       
                                       "minValue": "115",
                                       "maxValue": "150",
                                       "borderColor": "#B1E253",
                                       "code": "#FE0000"
                                   },
                                   {
                                       "minValue": "150",
                                       "maxValue": "200",
                                       "borderColor": "#B1E253",
                                       "code": "#98004B"
                                   },
                                   
                                ]
                            },
                            "dials": {
                                "dial": [
                                   {
                                       "id": "dials_id",
                                       "value": "0",
                                       "bgcolor": "#FFFFFF",
                                       "bordercolor": "#FFFFFF",
                                       "editMode": "0",
                                       //"radius": "250",                             
                                       "basewidth": "8",
                                       "baseRadius": "100",
                                       //"topwidth": "1",                               
                                       //"borderthickness": "2",                  
                                   }
                                ]
                            }
                        }
                    });
                    csatGauge.render();
                    csatGauge.setTransparent(true);
                });

            });
        </script>

        <script>
            var pictureSource;   // picture source
            var destinationType; // sets the format of returned value

            // Wait for device API libraries to load
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // device APIs are available
            //
            function onDeviceReady() {
                pictureSource = navigator.camera.PictureSourceType;
                destinationType = navigator.camera.DestinationType;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoDataSuccess(imageURI) {
                alert(imageURI);
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoURISuccess(imageURI) {
                alert(imageURI);
            }

            // A button will call this function
            //
            function capturePhoto() {
                // Take picture using device camera and retrieve image as base64-encoded string
                navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
                    quality: 50,
                    destinationType: destinationType.FILE_URI
                });
            }

            // A button will call this function
            //
            function getPhoto(source) {
                // Retrieve image file location from specified source
                navigator.camera.getPicture(onPhotoURISuccess, onFail, {
                    quality: 50,
                    destinationType: Camera.DestinationType.FILE_URI,
                    sourceType: source
                });
            }

            // Called if something bad happens.
            //
            function onFail(message) {
                alert('Failed because: ' + message);
            }
            function closeDialog() {
                easyDialog.close();
            }
            $(document).ready(function () {
   
                // init Masonry
                //alert(hhhhh);
                //setTimeout(function () {
               
					//var $grid = $('#main .photo-wall').masonry({
					//	itemSelector: '#main .photo-wall-item',
					//	isOriginTop: false,
					//});
					//// layout Isotope after each image loads
					//$grid.imagesLoaded().progress(function () {
					//	$grid.masonry();
					//});
				
                //},1000);
            });
            var tag = 0;

            document.getElementById("cameraBtn").addEventListener("click",function () {
                    easyDialog.open({
                        container: 'dialogCon',
                        fixed: false
                    });
                    if (tag == 0) {
                        tag++;
                        document.getElementById("overlay").addEventListener("click", closeDialog, false);
                        document.getElementById("photoBtn1").addEventListener("click", capturePhoto, false);
                        document.getElementById("photoBtn1").addEventListener("click", closeDialog, false);
                        document.getElementById("photoBtn2").addEventListener("click", function () { //getPhoto(pictureSource.PHOTOLIBRARY); 
						}, false);
                        document.getElementById("photoBtn2").addEventListener("click", closeDialog, false);
                    }
                    
                }, false);
				function ajaxFileUpload() {

					$.ajaxFileUpload({
						url : globle_url+"/file_upload",
						secureuri : false,
						fileElementId : 'image_src',
						dataType : 'json',
						success : function(data) {
		//						$("#text").show();
								console.info(data);
							//update("/ueditor/"+data.url);
						}
					});
				}
        </script>
           
            <script>
			var imgData = {
                "data": [{ "src": "img/pubuliu/1.jpg" }, { "src": "img/pubuliu/2.jpg" }, { "src": "img/pubuliu/3.jpg" }, { "src": "img/pubuliu/4.jpg" }, { "src": "img/pubuliu/5.jpg" }, { "src": "img/pubuliu/6.jpg" },
                 { "src": "img/pubuliu/7.jpg" }, { "src": "img/pubuliu/8.jpg" }, { "src": "img/pubuliu/9.jpg" }, { "src": "img/pubuliu/10.jpg" } ]
            }
            var pos={"imgPos":"5","slidePos":"-1"};
                var _end = 0;
                var _beginning = 0;
                var swiperAll;
                var swiperCon1;
                var swiperCon2;
                $(function () {                 
                 //   setTimeout(function () {
                       swiperAll = new Swiper('.swiper-container-all', {
                            initialSlide: 1,
                            //pagination: '.swiper-pagination',
                            //paginationClickable: true,
                            mousewheelInvert: true,//?
                            hashnav: true,//?
                            touchRatio: 1,//貌似作用是：值越大时鼠标或是手势移动时翻页的速度越大越快
                            direction: 'vertical',
                            touchAngle: 45,//允许翻页的角度范围
                            simulateTouch: true,//是否通过鼠标的drag和点击事件来模拟 touch事件（主要是电脑浏览器上没有touch事件），如果为false则电脑浏览器不具备翻页效果
                            followFinger: true,//设置翻页效果是否跟随手势
                            onInit:function(swiper)
                            {
                                swiperCon2 = new Swiper('.swiper-container-con2', {
                                    scrollbar: '.swiper-scrollbar2',
                                    direction: 'vertical',
                                    slidesPerView: 'auto',
                                    mousewheelControl: true,
                                    //mousewheelReleaseOnEdges: true,
                                    //mousewheelInvert:ture,
                                    parallax: true,
                                    freeMode: true,
                                    onReachEnd: function (swiperCon2) {
                                        if (swiperCon2.isEnd && _end > 8) {
                                            swiperAll.slideNext(true, 1000);
                                            _end = 0;
                                            _beginning = 0;
                                        }
                                        else
                                            _end++;
                                    },
                                    onReachBeginning: function (swiperCon2) {
                                        if (swiperCon2.isBeginning && _beginning > 8) {
                                            swiperAll.slidePrev(true, 1000);
                                            _end = 0;
                                            _beginning = 0;
                                        } else {
                                            _beginning++;
                                        }
                                    }
                                });
                                setTimeout(function () {
                                    swiperCon2.update(true);
                                },100);
                            },
                        });
						swiperCon1 = new Swiper('.swiper-container-con1', {
                    //slidesPerView: 3,
                    centeredSlides: true,
                    //paginationClickable: true,
                    //spaceBetween: 30,
                    scrollbar: '.swiper-scrollbar1',
                    onSlideChangeEnd: function (swiper) {
                        if (swiper.isEnd) {
                            var  queryImg= {
                                "data": [ { "src": "img/pubuliu/1.jpg" }, { "src": "img/pubuliu/2.jpg" }, { "src": "img/pubuliu/3.jpg" }, { "src": "img/pubuliu/4.jpg" }, { "src": "img/pubuliu/5.jpg" }, { "src": "img/pubuliu/6.jpg" }]
                            }
                          
                            addToSwiper(queryImg,pos,6,swiper);
                        }
                    },
                    onInit: function (swiper) {
                        var num = imgData.data.length;
                        var swiperHtml = "";
                        //for (var i = 0; i < Math.ceil(num / 6) ; i++) {
                        //    swiper.appendSlide('<div class="swiper-slide"></div>');
                        //    var slideHtml = "";
                        //    for (var j = i * 6; j < imgData.data.length; j++) {
                        //        slideHtml += "<div class='photo-wall-item'><div class='photo-box'><img src='" + imgData.data[j].src + "'/></div></div>";
                        //        if ((j+1) % 6 == 0 ) {                                    
                        //            break;
                        //        }                               
                        //    }
                        //    swiper.slides[i].innerHTML = slideHtml;
                        //}
                        addToSwiper(imgData, pos, 6, swiper);
                    }
                });
					//numPerPage:一页显示的图片数量
                //imgData:请求的图片
                //pos:保存当前slider位置和图片位置	
                        function addToSwiper(imgData,pos,numPerPage,swiper) {
                    //先从所有图片中取出上一页还可以容纳的数量的图片
                    //如果上页没有放满，则要补满
                    var i=0;
                    if (pos.imgPos < numPerPage - 1) {
                        var slideHtml = "";
                        var missNum = numPerPage - 1 - pos.imgPos;
                        for (; i < missNum; i++) {
                            pos.imgPos++;//当前图片位置+1
                            slideHtml+= "<div class='photo-wall-item'><div class='photo-box'><img src='" + imgData.data[i].src + "'/></div></div>";
                        }
                        swiper.slides[pos.slidePos].innerHTML += slideHtml;
                    }
                    //开始放置剩余的图片
                    //先计算剩余图片需要多少页
                    var addSlideNum = Math.ceil((imgData.data.length - i) / numPerPage);
                    for (var j = 0; j < addSlideNum ; j++) {
                        swiper.appendSlide('<div class="swiper-slide"></div>');
                        pos.slidePos++;//更新pos
                        var slideHtml = "";
                        var k = 0;
                        for (; i < imgData.data.length; i++) {
                            pos.imgPos = k;//更新pos
                            slideHtml += "<div class='photo-wall-item'><div class='photo-box'><img src='" + imgData.data[i].src + "'/></div></div>";
                            k++;                          
                            if (k % 6 == 0) {
                                i++;
                                break;
                            }
                                
                        }
                        swiper.slides[pos.slidePos].innerHTML = slideHtml;                   
                    }
                }

                  //  }, 10);

                });

            </script>
        
    </div>
   
</body>
</html>
